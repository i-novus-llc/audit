<?xml version='1.0' encoding='UTF-8'?>
<page xmlns="http://n2oapp.net/framework/config/schema/page-2.0" name="Журнал интеграционных сервисов">

    <regions>
        <region place="single">
            <table id="audit_table" query-id="auditIntegration" size="10">
                <filters>
                    <row>
                        <date-interval id="period" label="Дата и время" required="true" time-format="HH:mm">
                            <default-value begin="{moment().format('DD.MM.YYYY HH:mm:ss')}"
                                           end="{moment().format('DD.MM.YYYY HH:mm:ss')}"/>
                        </date-interval>
                        <input-select id="sender" label="Отправитель" type="multi"
                                      query-id="auditSourceApplication"
                                      label-field-id="code"/>
                        <input-select id="receiver" label="Получатель" type="multi"
                                      query-id="auditSourceApplication"
                                      label-field-id="code"/>
                    </row>
                    <row>
                        <input-text id="id" label="Идентификатор сообщения" domain="string"/>
                        <input-select id="auditEventTypes" label="Тип события" type="multi" query-id="auditEventType"
                                      label-field-id="name">
                            <pre-filters>
                                <eq field-id="auditTypeId" value="2"/>
                            </pre-filters>
                        </input-select>
                    </row>
                </filters>
                <columns>
                    <column text-field-id="eventDate" label="Дата и время" width="200px"
                            sorting-direction="desc" sorting-field-id="eventDate">
                        <link>
                            <show-modal page-id="auditIntegrationForm" master-field-id="id" detail-field-id="id"/>
                        </link>
                    </column>
                    <column text-field-id="id" label="Идентификатор сообщения">
                        <link>
                            <show-modal page-id="auditIntegrationForm" master-field-id="id" detail-field-id="id"/>
                        </link>
                    </column>
                    <column text-field-id="sender" label="Отправитель">
                        <link>
                            <show-modal page-id="auditIntegrationForm" master-field-id="id" detail-field-id="id"/>
                        </link>
                    </column>
                    <column text-field-id="receiver" label="Получатель">
                        <link>
                            <show-modal page-id="auditIntegrationForm" master-field-id="id" detail-field-id="id"/>
                        </link>
                    </column>
                    <column text-field-id="eventType" label="Действие">
                        <link>
                            <show-modal page-id="auditIntegrationForm" master-field-id="id" detail-field-id="id"/>
                        </link>
                    </column>
                    <column text-field-id="context" label="Данные">
                        <link>
                            <show-modal page-id="auditIntegrationForm" master-field-id="id" detail-field-id="id"/>
                        </link>
                    </column>
                </columns>
                <pre-filters>
                    <eq field-id="auditTypeId" value="2"/>
                </pre-filters>
            </table>
        </region>
    </regions>

</page>
